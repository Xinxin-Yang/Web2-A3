<div class="event-form-container">
  <div class="form-header">
    <h1>{{ formTitle }}</h1>
    <p>Fill in the details below to {{ isEditMode ? 'update' : 'create' }} your charity event</p>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading event data...</p>
  </div>

  <form *ngIf="!loading" [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="event-form">
    
    <!-- Âü∫Êú¨‰ø°ÊÅØ -->
    <div class="form-section">
      <h3>üìù Basic Information</h3>
      
      <div class="form-row">
        <div class="form-group full-width">
          <label for="name">Event Name *</label>
          <input 
            type="text" 
            id="name" 
            formControlName="name"
            placeholder="Enter event name"
            [class.error]="isFieldInvalid('name')">
          <div *ngIf="isFieldInvalid('name')" class="error-message">
            {{ getFieldError('name') }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="short_description">Short Description *</label>
          <textarea 
            id="short_description" 
            formControlName="short_description"
            placeholder="Brief description of the event (max 500 characters)"
            rows="3"
            [class.error]="isFieldInvalid('short_description')"></textarea>
          <div *ngIf="isFieldInvalid('short_description')" class="error-message">
            {{ getFieldError('short_description') }}
          </div>
          <div class="char-count">
            {{ eventForm.get('short_description')?.value?.length || 0 }}/500
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="full_description">Full Description</label>
          <textarea 
            id="full_description" 
            formControlName="full_description"
            placeholder="Detailed description of the event"
            rows="6"></textarea>
        </div>
      </div>
    </div>

    <!-- Ê¥ªÂä®ËØ¶ÊÉÖ -->
    <div class="form-section">
      <h3>üìÖ Event Details</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="date_time">Date & Time *</label>
          <input 
            type="datetime-local" 
            id="date_time" 
            formControlName="date_time"
            [class.error]="isFieldInvalid('date_time')">
          <div *ngIf="isFieldInvalid('date_time')" class="error-message">
            {{ getFieldError('date_time') }}
          </div>
        </div>

        <div class="form-group">
          <label for="category_id">Category *</label>
          <select 
            id="category_id" 
            formControlName="category_id"
            [class.error]="isFieldInvalid('category_id')">
            <option value="">Select a category</option>
            <option *ngFor="let category of categories" [value]="category.id">
              {{ category.name }}
            </option>
          </select>
          <div *ngIf="isFieldInvalid('category_id')" class="error-message">
            {{ getFieldError('category_id') }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="location">Location *</label>
          <input 
            type="text" 
            id="location" 
            formControlName="location"
            placeholder="e.g., City Central Park"
            [class.error]="isFieldInvalid('location')">
          <div *ngIf="isFieldInvalid('location')" class="error-message">
            {{ getFieldError('location') }}
          </div>
        </div>

        <div class="form-group">
          <label for="max_attendees">Max Attendees</label>
          <input 
            type="number" 
            id="max_attendees" 
            formControlName="max_attendees"
            placeholder="Leave empty for unlimited"
            min="1"
            [class.error]="isFieldInvalid('max_attendees')">
          <div *ngIf="isFieldInvalid('max_attendees')" class="error-message">
            {{ getFieldError('max_attendees') }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="address">Full Address</label>
          <input 
            type="text" 
            id="address" 
            formControlName="address"
            placeholder="Full street address">
        </div>
      </div>
    </div>

    <!-- Á•®Âä°‰∏éÂÆö‰ª∑ -->
    <div class="form-section">
      <h3>üé´ Ticket & Pricing</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="ticket_type">Ticket Type *</label>
          <select id="ticket_type" formControlName="ticket_type">
            <option value="free">Free</option>
            <option value="paid">Paid</option>
          </select>
        </div>

        <div class="form-group">
          <label for="ticket_price">Ticket Price (AUD)</label>
          <input 
            type="number" 
            id="ticket_price" 
            formControlName="ticket_price"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.error]="isFieldInvalid('ticket_price')"
            [attr.disabled]="eventForm.get('ticket_type')?.value === 'free' ? true : null">
          <div *ngIf="isFieldInvalid('ticket_price')" class="error-message">
            {{ getFieldError('ticket_price') }}
          </div>
        </div>
      </div>
    </div>

    <!-- Á≠πÊ¨æÁõÆÊ†á -->
    <div class="form-section">
      <h3>üí∞ Fundraising Goals</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="goal_amount">Fundraising Goal (AUD)</label>
          <input 
            type="number" 
            id="goal_amount" 
            formControlName="goal_amount"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.error]="isFieldInvalid('goal_amount')">
          <div *ngIf="isFieldInvalid('goal_amount')" class="error-message">
            {{ getFieldError('goal_amount') }}
          </div>
        </div>

        <div class="form-group">
          <label for="current_amount">Current Amount (AUD)</label>
          <input 
            type="number" 
            id="current_amount" 
            formControlName="current_amount"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.error]="isFieldInvalid('current_amount')">
          <div *ngIf="isFieldInvalid('current_amount')" class="error-message">
            {{ getFieldError('current_amount') }}
          </div>
        </div>
      </div>
    </div>

    <!-- Áä∂ÊÄÅ -->
    <div class="form-section">
      <h3>üìä Status</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="is_active">
            <span class="checkmark"></span>
            Active Event
          </label>
          <small>Inactive events won't be visible on the public site</small>
        </div>
      </div>
    </div>

    <!-- Ë°®ÂçïÊìç‰Ωú -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="submitting">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="submitting">
        <span *ngIf="submitting" class="button-spinner"></span>
        {{ submitting ? 'Saving...' : submitButtonText }}
      </button>
    </div>
  </form>
</div>